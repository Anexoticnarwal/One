<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Inner Sanctuary</title>
  <style>
    html {
      box-sizing: border-box;
      font-size: 16px;
      line-height: 1.6;
      color: #1a1a1a;
    }

    *, *:before, *:after {
      box-sizing: inherit;
    }

    html, body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', system-ui, -apple-system, "Helvetica Neue", Arial, sans-serif;
      overflow-x: hidden;
      min-height: 100%;
      background-color: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(6px);
    }

    /* background container */
    .background {
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
      background-attachment: fixed;
      background-size: cover;
      background-position: center;
      animation: natureCycle 120s infinite linear;
      z-index: -1;
      filter: saturate(0.95) brightness(0.9);
    }

    @keyframes natureCycle {
      0%   { background-image: url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1600&q=60'); }
      25%  { background-image: url('https://images.unsplash.com/photo-1503264116251-35a269479413?auto=format&fit=crop&w=1600&q=60'); }
      50%  { background-image: url('https://images.unsplash.com/photo-1502082553048-f009c37129b9?auto=format&fit=crop&w=1600&q=60'); }
      75%  { background-image: url('https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=1600&q=60'); }
      100% { background-image: url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1600&q=60'); }
    }

    main.container {
      max-width: 800px;
      margin: 2rem auto;
      padding: 1rem;
    }

    header {
      text-align: center;
      padding: 0.5rem 0;
    }

    header h1 {
      font-size: 4rem;
      font-weight: 900;
      color: #ffffff;
      text-shadow: 0 0 10px rgba(0,0,0,0.6);
      margin: 0;
      line-height: 1;
    }

    section {
      background: rgba(255, 255, 255, 0.6);
      border-radius: 12px;
      padding: 2rem;
      margin-bottom: 1.5rem;
      box-shadow: 0 6px 18px rgba(0,0,0,0.08);
      color: #111;
    }

    section h2 {
      font-size: 1.8rem;
      font-weight: 600;
      margin-bottom: 1rem;
      color: #222;
    }

    #quote {
      font-size: 1.6rem;
      font-style: italic;
      font-weight: 500;
      color: #0b0b0b;
      min-height: 96px;
      transition: opacity 0.45s ease-in-out, transform 0.45s ease-in-out;
      opacity: 1;
      transform: translateY(0);
    }

    .button-group {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      margin-top: 1.25rem;
      align-items: center;
    }

    button {
      padding: 12px 16px;
      border: none;
      border-radius: 8px;
      background: #2c3e50;
      color: white;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      flex: 1;
      min-width: 120px;
      transition: background 0.18s ease, transform 0.08s ease;
    }

    button.secondary {
      background: #4a6276;
    }

    button.ghost {
      background: rgba(44,62,80,0.08);
      color: #2c3e50;
      font-weight: 600;
      border: 1px solid rgba(44,62,80,0.08);
    }

    button:active { transform: translateY(1px); }

    /* Focus styles for accessibility */
    :focus {
      outline: none;
    }

    button:focus, textarea:focus, #quote:focus {
      outline: 3px solid rgba(44,62,80,0.18);
      outline-offset: 2px;
    }

    #notepad {
      width: 100%;
      height: 320px;
      padding: 1rem;
      font-size: 1.05rem;
      color: #111;
      border-radius: 10px;
      border: 1px solid #cfcfcf;
      background-color: rgba(255, 255, 255, 0.6);
      resize: vertical;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.6);
    }

    footer {
      text-align: center;
      padding: 0.5rem 0;
      font-size: 0.9rem;
      color: #444;
    }

    /* responsive */
    @media (max-width: 600px) {
      header h1 {
        font-size: 2.6rem;
      }

      section h2 {
        font-size: 1.4rem;
      }

      #quote {
        font-size: 1.2rem;
      }

      #notepad {
        height: 240px;
        font-size: 1rem;
      }

      .button-group {
        flex-direction: column;
      }
    }

    /* Respect reduced motion preference */
    @media (prefers-reduced-motion: reduce) {
      .background { animation: none; }
      #quote { transition: none; }
      button { transition: none; }
    }

    /* ensure background sits behind page and doesn't capture pointer events */
    .background, .background::before {
      pointer-events: none;
    }
  </style>
</head>
<body>
  <div class="background" aria-hidden="true"></div>

  <main class="container" id="mainContent">

    <header>
      <h1>Inner Sanctuary</h1>
    </header>

    <section id="mindfulness">
      <h2>üå∏ Inspire</h2>
      <div id="quote" role="status" aria-live="polite" aria-atomic="true" tabindex="0">Begin with a breath‚Ä¶</div>
      <div class="button-group" role="toolbar" aria-label="Quote actions">
        <button type="button" id="newQuoteBtn" aria-label="Generate new quote">‚ú® New Quote</button>
        <button type="button" id="copyQuoteBtn" class="secondary" aria-label="Copy quote to clipboard">üìã Copy Quote</button>
        <button type="button" id="shareQuoteBtn" class="ghost" aria-label="Share quote">üì§ Share</button>
      </div>
    </section>

    <section id="growth">
      <h2>üìù Reflect</h2>
      <textarea id="notepad" placeholder="Write freely..." aria-label="Personal notepad"></textarea>
      <div class="button-group" style="margin-top:0.75rem;">
        <button type="button" id="clearNotepadBtn" class="ghost" aria-label="Reset notepad">üßπ Reset Notepad</button>
        <div style="flex:1"></div>
      </div>
    </section>

    <footer>
      &copy; 2025 Inner Sanctuary
    </footer>

  </main>

  <script>
    (function () {
      const quotes = [
        "You are enough.",
        "Breathe deeply.",
        "Stillness speaks.",
        "Let go of what weighs you down.",
        "Joy is a choice.",
        "Be kind to yourself.",
        "Small steps matter.",
        "The path is within.",
        "Peace I leave with you; my peace I give you. ‚Äî John 14:27",
        "Be still, and know that I am God. ‚Äî Psalm 46:10",
        "The wound is the place where the light enters you. ‚Äî Rumi",
        "Inhale courage, exhale fear.",
        "God is within her, she will not fall. ‚Äî Psalm 46:5",
        "The quieter you become, the more you can hear. ‚Äî Ram Dass",
        "Faith is taking the first step even when you don‚Äôt see the whole staircase. ‚Äî MLK Jr.",
        "Let your heart be light.",
        "You are held, even when you feel alone.",
        "This too shall pass.",
        "Grace is enough.",
        "The soul always knows what to do to heal itself.",
        "Cast all your anxiety on Him because He cares for you. ‚Äî 1 Peter 5:7",
        "Even the darkest night will end and the sun will rise. ‚Äî Victor Hugo",
        "The light shines in the darkness, and the darkness has not overcome it. ‚Äî John 1:5"
      ];

      let remainingQuotes = [...quotes];

      const quoteEl = document.getElementById('quote');
      const newQuoteBtn = document.getElementById('newQuoteBtn');
      const shareQuoteBtn = document.getElementById('shareQuoteBtn');
      const copyQuoteBtn = document.getElementById('copyQuoteBtn');
      const notepad = document.getElementById('notepad');
      const clearNotepadBtn = document.getElementById('clearNotepadBtn');

      function pickRandomQuote() {
        if (remainingQuotes.length === 0) remainingQuotes = [...quotes];
        const index = Math.floor(Math.random() * remainingQuotes.length);
        return remainingQuotes.splice(index, 1)[0];
      }

      function animateQuoteChange(newText) {
        const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        if (prefersReduced) {
          quoteEl.textContent = newText;
          return;
        }
        quoteEl.style.opacity = '0';
        quoteEl.style.transform = 'translateY(6px)';
        setTimeout(() => {
          quoteEl.textContent = newText;
          quoteEl.style.opacity = '1';
          quoteEl.style.transform = 'translateY(0)';
          quoteEl.focus();
        }, 280);
      }

      function generateQuote() {
        const quote = pickRandomQuote();
        animateQuoteChange(quote);
      }

      async function shareQuote() {
        const quote = quoteEl.textContent || '';
        const pageUrl = window.location.href;
        if (navigator.share) {
          try {
            await navigator.share({
              title: 'Mindful Quote',
              text: quote,
              url: pageUrl
            });
          } catch (err) {
            console.log('Share failed', err);
          }
          return;
        }
        // fallback: copy to clipboard with url appended
        const payload = `${quote}\n${pageUrl}`;
        try {
          if (navigator.clipboard && navigator.clipboard.writeText) {
            await navigator.clipboard.writeText(payload);
            alert('Quote and link copied to clipboard');
          } else {
            // older fallback
            const textarea = document.createElement('textarea');
            textarea.value = payload;
            textarea.style.position = 'fixed';
            textarea.style.left = '-9999px';
            document.body.appendChild(textarea);
            textarea.select();
            try {
              document.execCommand('copy');
              alert('Quote and link copied to clipboard');
            } catch {
              alert('Sharing is not supported on this device.');
            } finally {
              document.body.removeChild(textarea);
            }
          }
        } catch (err) {
          console.log('Clipboard failed', err);
          alert('Sharing is not supported on this device.');
        }
      }

      async function copyQuote() {
        const quote = quoteEl.textContent || '';
        if (!quote) {
          alert('There is no quote to copy.');
          return;
        }
        const payload = `${quote}`;
        try {
          if (navigator.clipboard && navigator.clipboard.writeText) {
            await navigator.clipboard.writeText(payload);
            alert('Quote copied to clipboard');
          } else {
            const textarea = document.createElement('textarea');
            textarea.value = payload;
            textarea.style.position = 'fixed';
            textarea.style.left = '-9999px';
            document.body.appendChild(textarea);
            textarea.select();
            try {
              document.execCommand('copy');
              alert('Quote copied to clipboard');
            } catch {
              alert('Could not copy quote automatically.');
            } finally {
              document.body.removeChild(textarea);
            }
          }
        } catch (err) {
          console.log('Copy failed', err);
          alert('Could not copy quote automatically.');
        }
      }

      // notepad persistence
      const STORAGE_KEY = 'inner_sanctuary_notepad_v1';
      notepad.value = localStorage.getItem(STORAGE_KEY) || '';
      notepad.addEventListener('input', () => {
        localStorage.setItem(STORAGE_KEY, notepad.value);
      });

      clearNotepadBtn.addEventListener('click', () => {
        const confirmed = confirm('Reset your notepad? This will remove saved content.');
        if (!confirmed) return;
        notepad.value = '';
        localStorage.removeItem(STORAGE_KEY);
        notepad.focus();
      });

      // attach event listeners
      newQuoteBtn.addEventListener('click', generateQuote);
      shareQuoteBtn.addEventListener('click', shareQuote);
      copyQuoteBtn.addEventListener('click', copyQuote);

      // keyboard shortcut A for new quote, C for copy when focused inside main content
      document.getElementById('mainContent').addEventListener('keydown', (e) => {
        if (e.altKey || e.ctrlKey || e.metaKey) return;
        if (e.key === 'a' || e.key === 'A') {
          e.preventDefault();
          generateQuote();
        } else if (e.key === 'c' || e.key === 'C') {
          // avoid interfering with normal copy when selecting text in textarea
          const activeTag = document.activeElement && document.activeElement.tagName;
          if (activeTag !== 'TEXTAREA' && activeTag !== 'INPUT') {
            e.preventDefault();
            copyQuote();
          }
        }
      });

      // initial gentle reveal for first quote
      setTimeout(() => {
        quoteEl.style.opacity = '1';
      }, 120);

      // expose for debugging if needed
      window.InnerSanctuary = {
        generateQuote,
        shareQuote,
        copyQuote
      };
    })();
  </script>
</body>
</html>
